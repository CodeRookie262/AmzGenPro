# AmazonGen 产品业务文档

## 1. 项目概述 (Project Overview)

**AmazonGen (亚马逊产品图生成套件)** 是一个专为电商卖家设计的自动化图片生成工具。它利用 Google Gemini 先进的多模态 AI 能力，帮助用户从一张简单的产品原图，快速生成一套高质量、多场景的亚马逊产品展示图（Listing Images）。

核心价值：
- **自动化**：一键生成多张不同场景的图片，无需人工 PS。
- **一致性**：确保生成图中的产品主体与原图保持高度一致。
- **高质量**：利用 Gemini Pro/Flash 模型生成商业摄影级别的图片。

## 2. 核心概念 (Core Concepts)

### 2.1 产品面具 (Product Mask)
"面具" 是针对某一类产品的生成模板配置。它代表了一条产品线或一种特定的营销风格。
- **示例**： "登山靴 V1", "夏季连衣裙 - 海滩风", "咖啡机 - 高级家用"。
- **作用**：存储了一组预定义的生成规则，用户在生成时只需选择对应的面具，即可获得标准化的套图。

### 2.2 镜头定义 (Image Definition)
"镜头" 是面具下的具体图片生成任务，定义了单张图片的视角和场景。
- **组成**：
  - **名称**：如 "白底主图", "厨房场景图", "模特佩戴图"。
  - **场景需求**：简短的中文描述，如 "放在大理石台面上，晨光，温馨氛围"。
- **逻辑**：一个面具包含多个镜头（例如 1 个面具 = 5 张不同角度/场景的图）。

## 3. 业务流程 (Business Workflow)

系统业务主要分为两个阶段：**配置阶段**（由管理员/运营负责人操作）和 **生产阶段**（由设计/运营人员操作）。

### 3.1 配置阶段 (Configuration)
1.  **创建面具**：新建一个产品类目配置。
2.  **选择模型**：配置用于优化提示词 (Prompt) 的 Gemini 模型版本 (Flash 或 Pro)。
3.  **定义镜头**：添加多张需要的图片定义，输入简短的中文场景描述。
4.  **保存配置**：配置保存至本地存储，供生产阶段调用。

### 3.2 生产阶段 (Production)
1.  **选择面具**：选择当前要生成的产品对应的配置模板。
2.  **上传原图**：上传产品原始照片（支持手机拍摄或简单白底图）。
3.  **自动抠图**：系统自动调用 AI 移除背景，提取纯净的产品主体。
4.  **选择生图模型**：根据预算和质量要求，选择生图用的 Gemini 模型 (Flash Image 快速版 或 Pro Image 高清版)。
5.  **一键生成**：
    - **Step 1 - 提示词优化**：系统将 "产品主体" + "中文场景描述" 发送给 AI，生成详细的英文商业摄影 Prompt。
    - **Step 2 - 图像生成**：系统利用优化后的 Prompt 和产品主体，合成最终场景图。
6.  **预览与下载**：实时查看生成进度，预览大图（可查看对应的 Prompt），并批量下载结果。

## 4. 功能模块 (Functional Modules)

### 4.1 管理面板 (Admin Panel)
- **入口**：通常作为后台配置页。
- **功能**：
  - 面具的增删改查。
  - 镜头定义的添加与移除。
  - 提示词优化模型的选择。

### 4.2 用户面板 (User Panel)
- **入口**：主操作界面。
- **功能**：
  - **左侧操作区**：
    - 面具选择器。
    - 图片上传区域（集成自动背景移除状态显示）。
    - 生图模型选择器。
    - "开始生成" 触发按钮。
  - **右侧展示区**：
    - 生成结果网格列表。
    - 实时状态显示（优化中... -> 绘图中... -> 完成）。
    - 图片预览与单张/批量下载。
    - 调试功能：查看 AI 优化后的英文 Prompt。

## 5. 技术架构简述 (Technical Architecture)

- **前端框架**：React + Vite + TypeScript
- **UI 组件**：Tailwind CSS + Lucide React Icons
- **AI 服务集成**：
  - **Google Gemini API**：
    - `gemini-2.5-flash` / `gemini-3-pro-preview`：用于理解图片并优化生成提示词。
    - `gemini-2.5-flash-image` / `gemini-3-pro-image-preview`：用于最终的图像生成 (Imagen 3 capability)。
    - 背景移除：利用 Flash 模型进行主体识别和提取。
- **数据存储**：
  - `localStorage`：目前配置数据（面具、镜头）存储在浏览器本地，轻量级且无需后端数据库。

